<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- table 10 x 10 -->
    <div class="drawing">
        <table>
            <tbody>
                <tr>
                    <td class="cell" id="cell-0-0"></td>
                    <td class="cell" id="cell-0-1"></td>
                    <td class="cell" id="cell-0-2"></td>
                    <td class="cell" id="cell-0-3"></td>
                    <td class="cell" id="cell-0-4"></td>
                    <td class="cell" id="cell-0-5"></td>
                    <td class="cell" id="cell-0-6"></td>
                    <td class="cell" id="cell-0-7"></td>
                    <td class="cell" id="cell-0-8"></td>
                    <td class="cell" id="cell-0-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-1-0"></td>
                    <td class="cell" id="cell-1-1"></td>
                    <td class="cell" id="cell-1-2"></td>
                    <td class="cell" id="cell-1-3"></td>
                    <td class="cell" id="cell-1-4"></td>
                    <td class="cell" id="cell-1-5"></td>
                    <td class="cell" id="cell-1-6"></td>
                    <td class="cell" id="cell-1-7"></td>
                    <td class="cell" id="cell-1-8"></td>
                    <td class="cell" id="cell-1-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-2-0"></td>
                    <td class="cell" id="cell-2-1"></td>
                    <td class="cell" id="cell-2-2"></td>
                    <td class="cell" id="cell-2-3"></td>
                    <td class="cell" id="cell-2-4"></td>
                    <td class="cell" id="cell-2-5"></td>
                    <td class="cell" id="cell-2-6"></td>
                    <td class="cell" id="cell-2-7"></td>
                    <td class="cell" id="cell-2-8"></td>
                    <td class="cell" id="cell-2-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-3-0"></td>
                    <td class="cell" id="cell-3-1"></td>
                    <td class="cell" id="cell-3-2"></td>
                    <td class="cell" id="cell-3-3"></td>
                    <td class="cell" id="cell-3-4"></td>
                    <td class="cell" id="cell-3-5"></td>
                    <td class="cell" id="cell-3-6"></td>
                    <td class="cell" id="cell-3-7"></td>
                    <td class="cell" id="cell-3-8"></td>
                    <td class="cell" id="cell-3-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-4-0"></td>
                    <td class="cell" id="cell-4-1"></td>
                    <td class="cell" id="cell-4-2"></td>
                    <td class="cell" id="cell-4-3"></td>
                    <td class="cell" id="cell-4-4"></td>
                    <td class="cell" id="cell-4-5"></td>
                    <td class="cell" id="cell-4-6"></td>
                    <td class="cell" id="cell-4-7"></td>
                    <td class="cell" id="cell-4-8"></td>
                    <td class="cell" id="cell-4-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-5-0"></td>
                    <td class="cell" id="cell-5-1"></td>
                    <td class="cell" id="cell-5-2"></td>
                    <td class="cell" id="cell-5-3"></td>
                    <td class="cell" id="cell-5-4"></td>
                    <td class="cell" id="cell-5-5"></td>
                    <td class="cell" id="cell-5-6"></td>
                    <td class="cell" id="cell-5-7"></td>
                    <td class="cell" id="cell-5-8"></td>
                    <td class="cell" id="cell-5-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-6-0"></td>
                    <td class="cell" id="cell-6-1"></td>
                    <td class="cell" id="cell-6-2"></td>
                    <td class="cell" id="cell-6-3"></td>
                    <td class="cell" id="cell-6-4"></td>
                    <td class="cell" id="cell-6-5"></td>
                    <td class="cell" id="cell-6-6"></td>
                    <td class="cell" id="cell-6-7"></td>
                    <td class="cell" id="cell-6-8"></td>
                    <td class="cell" id="cell-6-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-7-0"></td>
                    <td class="cell" id="cell-7-1"></td>
                    <td class="cell" id="cell-7-2"></td>
                    <td class="cell" id="cell-7-3"></td>
                    <td class="cell" id="cell-7-4"></td>
                    <td class="cell" id="cell-7-5"></td>
                    <td class="cell" id="cell-7-6"></td>
                    <td class="cell" id="cell-7-7"></td>
                    <td class="cell" id="cell-7-8"></td>
                    <td class="cell" id="cell-7-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-8-0"></td>
                    <td class="cell" id="cell-8-1"></td>
                    <td class="cell" id="cell-8-2"></td>
                    <td class="cell" id="cell-8-3"></td>
                    <td class="cell" id="cell-8-4"></td>
                    <td class="cell" id="cell-8-5"></td>
                    <td class="cell" id="cell-8-6"></td>
                    <td class="cell" id="cell-8-7"></td>
                    <td class="cell" id="cell-8-8"></td>
                    <td class="cell" id="cell-8-9"></td>
                </tr>
                <tr>
                    <td class="cell" id="cell-9-0"></td>
                    <td class="cell" id="cell-9-1"></td>
                    <td class="cell" id="cell-9-2"></td>
                    <td class="cell" id="cell-9-3"></td>
                    <td class="cell" id="cell-9-4"></td>
                    <td class="cell" id="cell-9-5"></td>
                    <td class="cell" id="cell-9-6"></td>
                    <td class="cell" id="cell-9-7"></td>
                    <td class="cell" id="cell-9-8"></td>
                    <td class="cell" id="cell-9-9"></td>
                </tr>
            </tbody>
        </table>
        <button onclick="reset()">Reset</button>
        <button onclick="save()">Save</button>
    </div>
</body>

<script>
    var cells = document.getElementsByClassName("cell");
    for (var i = 0; i < cells.length; i++) {
        cells[i].addEventListener("click", function () {
            if (this.style.backgroundColor == "black") {
                this.style.backgroundColor = "white";
            } else {
                this.style.backgroundColor = "black";
            }
        });
    }

    function reset() {
        var cells = document.getElementsByClassName("cell");
        for (var i = 0; i < cells.length; i++) {
            cells[i].style.backgroundColor = "white";
        }
    }

    function save(){
        let name = prompt("Enter name of the pattern");
        var cells = document.getElementsByClassName("cell");
        var data = [];
        for (var i = 0; i < cells.length; i++) {
            if (cells[i].style.backgroundColor == "black") {
                data.push(1);
            } else {
                data.push(0);
            }
        }
        // save to disk as json
        let object = {
            name: name,
            data: data
        }
        var blob = new Blob([JSON.stringify(object)], {
            type: "application/json"
        });

        // save to local storage
        localStorage.setItem("drawing", JSON.stringify(object));

        let a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = name + ".json";
        a.click();
    }

    // load from local storage
    let drawing = localStorage.getItem("drawing");
    if (drawing) {
        drawing = JSON.parse(drawing);
        let cells = document.getElementsByClassName("cell");
        for (var i = 0; i < cells.length; i++) {
            if (drawing.data[i] == 1) {
                cells[i].style.backgroundColor = "black";
            } else {
                cells[i].style.backgroundColor = "white";
            }
        }
    }

    // make shape form user input (as a array of 0 and 1)
    document.body.addEventListener("keydown", function (event) {
        if (event.keyCode == 13) {
            // let name = prompt("Enter name of the pattern");
            let input = prompt("Enter the pattern (as a array of 0 and 1)");
            let data = JSON.parse(input);
            let object = {
                name: name,
                data: data
            }
            var blob = new Blob([JSON.stringify(object)], {
                type: "application/json"
            });

            // save to local storage
            localStorage.setItem("drawing", JSON.stringify(object));

            document.location.reload();
        }
    });
</script>

<style>
    .cell {
        width: 50px;
        height: 50px;
        border: 1px solid black;
    }

    .cell:hover {
        background-color: #ccc;
    }
</style>


</html>